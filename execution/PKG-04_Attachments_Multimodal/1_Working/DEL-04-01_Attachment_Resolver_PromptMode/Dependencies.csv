RegisterSchemaVersion,DependencyID,FromPackageID,FromDeliverableID,FromDeliverableName,DependencyClass,AnchorType,Direction,DependencyType,TargetType,TargetPackageID,TargetDeliverableID,TargetRefID,TargetName,TargetLocation,Statement,EvidenceFile,SourceRef,EvidenceQuote,Explicitness,RequiredMaturity,ProposedMaturity,SatisfactionStatus,Confidence,Origin,FirstSeen,LastSeen,Status,Notes
v3.1,DEP-04-01-001,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,ANCHOR,IMPLEMENTS_NODE,UPSTREAM,OTHER,PACKAGE,,,,PKG-04 — Attachments & Multimodal Turns,,DEL-04-01 implements scope within PKG-04 (Attachments & Multimodal Turns),Datasheet.md,Identification > Package,"Package | PKG-04 — Attachments & Multimodal Turns",EXPLICIT,TBD,TBD,TBD,HIGH,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,FACT. Parent anchor confirmed via Datasheet identification table and Decomposition PKG-04 deliverables table.
v3.1,DEP-04-01-002,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,ANCHOR,TRACES_TO_REQUIREMENT,UPSTREAM,OTHER,REQUIREMENT,,,SOW-007,SOW-007: Support turns with multimodal attachments,,DEL-04-01 traces to SOW-007: Support turns with multimodal attachments where UI sends absolute file paths and server resolves/reads/classifies the files,Datasheet.md,Identification > Scope Coverage,"Scope Coverage | SOW-007, SOW-008, SOW-009",EXPLICIT,TBD,TBD,TBD,HIGH,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,FACT. Explicit scope coverage in Datasheet and Decomposition Scope Ledger.
v3.1,DEP-04-01-003,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,ANCHOR,TRACES_TO_REQUIREMENT,UPSTREAM,OTHER,REQUIREMENT,,,SOW-008,SOW-008: Enforce attachment resolver validation rules,,DEL-04-01 traces to SOW-008: Enforce attachment resolver validation rules,Datasheet.md,Identification > Scope Coverage,"Scope Coverage | SOW-007, SOW-008, SOW-009",EXPLICIT,TBD,TBD,TBD,HIGH,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,FACT. Explicit scope coverage in Datasheet and Decomposition Scope Ledger.
v3.1,DEP-04-01-004,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,ANCHOR,TRACES_TO_REQUIREMENT,UPSTREAM,OTHER,REQUIREMENT,,,SOW-009,SOW-009: Ensure runtime prompt-mode selection behaves correctly,,DEL-04-01 traces to SOW-009: Ensure runtime prompt-mode selection behaves correctly,Datasheet.md,Identification > Scope Coverage,"Scope Coverage | SOW-007, SOW-008, SOW-009",EXPLICIT,TBD,TBD,TBD,HIGH,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,FACT. Explicit scope coverage in Datasheet and Decomposition Scope Ledger.
v3.1,DEP-04-01-005,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,ANCHOR,TRACES_TO_REQUIREMENT,UPSTREAM,OTHER,REQUIREMENT,,,OBJ-003,OBJ-003: Attachment-enabled turns are robust and UX-safe,,DEL-04-01 supports OBJ-003: Attachment-enabled turns are robust and UX-safe,Datasheet.md,Identification > Objective,"OBJ-003 — Attachment-enabled turns are robust and UX-safe",EXPLICIT,TBD,TBD,TBD,HIGH,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,FACT. Explicit objective in Datasheet and Decomposition Objectives section.
v3.1,DEP-04-01-006,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,EXECUTION,NOT_APPLICABLE,UPSTREAM,PREREQUISITE,DELIVERABLE,PKG-03,DEL-03-02,,DEL-03-02: Turn Execution API + SSE Streaming,,Attachment resolver is invoked within the turn execution flow managed by DEL-03-02; the POST /api/harness/turn route calls resolveAttachmentsToContentBlocks() when attachments are provided,Guidance.md,Considerations > C6,"The attachment resolver is invoked within the turn execution flow managed by DEL-03-02",EXPLICIT,TBD,TBD,TBD,HIGH,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,"FACT. Guidance C6 and C7 explicitly state DEL-03-02 provides the turn execution API that invokes the resolver. Procedure Prerequisite 7 confirms: ""DEL-03-02 turn execution API available or in parallel development."""
v3.1,DEP-04-01-007,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,EXECUTION,NOT_APPLICABLE,DOWNSTREAM,INTERFACE,DELIVERABLE,PKG-04,DEL-04-02,,DEL-04-02: UI Attachment Pipeline (Picker/Preview/Rollback/Rehydration),,DEL-04-01 provides resolved content blocks and error responses consumed by DEL-04-02 UI pipeline; HTTP 400 response body and content block format are the two concrete interface points,Guidance.md,Considerations > C5,"DEL-04-02 provides: Array of absolute path strings via the turn API. DEL-04-01 provides: Resolved content blocks (or errors)",EXPLICIT,TBD,TBD,TBD,HIGH,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,"FACT. Guidance C5 explicitly defines the DEL-04-01/DEL-04-02 contract. Specification XVER-01 confirms cross-deliverable verification requirement. Datasheet Construction states: ""DEL-04-02 (UI Attachment Pipeline) depends on resolver behavior."""
v3.1,DEP-04-01-008,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,EXECUTION,NOT_APPLICABLE,UPSTREAM,PREREQUISITE,DOCUMENT,,,,,docs/SPEC.md Section 9.8,Authoritative specification for attachment handling and prompt-mode selection; normative basis for REQ-01 through REQ-11 and REQ-13,Datasheet.md,References,"docs/SPEC.md Section 9.8 | Authoritative specification for attachment handling and prompt-mode selection",EXPLICIT,TBD,TBD,TBD,HIGH,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,FACT. Cited as authoritative source throughout all deliverable documents. Primary normative reference for all validation rules and prompt-mode behavior.
v3.1,DEP-04-01-009,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,EXECUTION,NOT_APPLICABLE,UPSTREAM,PREREQUISITE,DOCUMENT,,,,,docs/harness/chirality_harness_graphs_and_sequence.md,Module dependency graph and turn sequence diagram defining the resolver invocation contract and function signature,Datasheet.md,References,"docs/harness/chirality_harness_graphs_and_sequence.md | Module dependency graph and turn sequence diagram",EXPLICIT,TBD,TBD,TBD,HIGH,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,FACT. Cited as source for module architecture and resolveAttachmentsToContentBlocks function signature (steps 108-109).
v3.1,DEP-04-01-010,PKG-04,DEL-04-01,Server-side Attachment Resolver + Prompt Mode Selection,EXECUTION,NOT_APPLICABLE,UPSTREAM,PREREQUISITE,EXTERNAL,,,,,Anthropic Agent SDK documentation (location TBD),SDK query() API contract for string vs multimodal prompt modes and content block format specification; normative basis for REQ-10/REQ-11/REQ-12,Specification.md,Standards,"Anthropic Agent SDK documentation | SDK query() API contract... location TBD",EXPLICIT,TBD,TBD,PENDING,MEDIUM,EXTRACTED,2026-02-21,2026-02-21,ACTIVE,"FACT. Specification Standards table and Procedure Prerequisite 2 explicitly require SDK documentation. SatisfactionStatus=PENDING because document location is TBD. Confidence=MEDIUM due to unresolved location."
